<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Categorize</title>
    <!--1.导入Vue.js-->
    <script src="../plugins/vue.js"></script>
    <!--      2.导入axios.js-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="../css/categorize.css">
    <link rel="stylesheet" href="../css/navbar.css">
    <link rel="stylesheet" href="../css/global.css">

</head>
<body>

<!-- 公共头部 开始 -->
<div>
    <div class="blankHead zwfl_head">
        <div class="n1_header" style="box-shadow: none;">
            <div class="n1_header_wrap">
                <h1>
                    <a href="../index.html"><img src="../img/logo.jpg" alt="logo" title="螺钉书店"></a>
                </h1>
                <div class="n1_headerR">
                    <ul class="n1_nav">
                        <li ><a href="../index.html">首页</a></li>
                        <li class="current"><a href="categorize.html">分类</a></li>
                        <li><a href="">排行</a></li>
                        <li><a href="">消息</a></li>
                        <li><a href="">购物车</a></li>
                        <li><a href="">我的信息</a></li>

                    </ul>
                    <div class="n1_search">
                        <form method="get" action="" onsubmit="return false;" id="search_form" name="search_form">
                            <input type="text" name="keyword" value="" placeholder="书名/作者名" autocomplete="off">
                            <!-- class="big_search"-->
                            <s id="btn_submit_search_form"></s>
                        </form>
                        <ul class="list" id="search_suggestion_box" style="display: none;"></ul>
                    </div>

                    <!--                    改进方案：当用户没有登录时，显示登录按钮，要求点击跳转登录页面
                                                    当用户已经登录时，替换登录按钮，显示个人信息跳转按钮
                                                    再增加一个退出登录按钮
                    -->
                    <!--                    改进方案：当用户没有登录时，显示登录按钮，要求点击跳转登录页面
                                当用户已经登录时，替换登录按钮，显示个人信息跳转按钮
                                再增加一个退出登录按钮

-->
                    <div class="n1_login" id="n1_login">
                        <span class="n1_login_beffor" v-if="!userLoggedIn" @click="goToLoginPage">登录</span>
                        <span class="n1_login_beffor" v-if="userLoggedIn" @click="logout">{{ username }}</span>
                    </div>
                    <!--                    <div class="n1_login">-->

                    <!--                        <a href="../page/login.html"><span class="n1_login_beffor" id="unlogin_box" style="display: block;">登录</span></a>-->
                    <!--                        <div class="n1_login_affer" id="login_box" style="display: none;">-->
                    <!--                            <a href=""><i></i><s></s></a>-->
                    <!--                            <ul>-->
                    <!--                                &lt;!&ndash; <li><a href="" title="我的图书"><s class="myBook"></s>我的图书</a></li> &ndash;&gt;-->
                    <!--                                <li><a href="" title="设置"><s class="n1_recharge"></s>设置</a></li>-->
                    <!--                                <li><a href="" title="退出登录"><s class="quit"></s>退出</a></li>-->
                    <!--                            </ul>-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                </div>
            </div>
        </div>
    </div>
</div>


<!--内容部分 开始-->
<div class="content" id="content">
    <!--选择部分 开始-->
    <div class="genre" >

        <div class="difgenre">
            <span class="left">类型</span>
            <div class="right click">
                <ul>
                    <li v-for="item in categorize" v-if="booktype === item.id" class="current"><a :href="'http://localhost:8080/front/page/categorize.html?booktype=' + item.id+'&other='+other+'&showtitle='+showtitle">{{item.name}}</a></li>
                    <li v-for="item in categorize" v-if="booktype !== item.id" ><a :href="'http://localhost:8080/front/page/categorize.html?booktype=' + item.id+'&other='+other+'&showtitle='+showtitle">{{item.name}}</a></li>
<!--                    <li class="current" ><a href="">小说</a></li>-->

                </ul>
            </div>
        </div>
        <div class="difgenre other">
            <span class="left">其他</span>
            <div class="right">
                <ul>
                    <li class="current"><a>全部</a></li>
                    <li><a href="">特价促销</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--选择部分 结束-->
    <!--展示标题 开始-->
    <div class="showTitle">
        <span class="hot current"><a href="">热门</a></span>
        <span class="comment"><a href="">好评</a></span>
        <p>
            <a href="" class="leftArro"><-</a>
            第<i>1</i>页
            <a href="" class="rightArro">-></a>
        </p>
    </div>
    <!--展示标题 结束-->
    <!--展示内容 开始-->
    <div class="show">
        <ul class="newShow">
            <li>
                <a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">
                    <img src="https://bookbk.img.zhangyue01.com/idc_1/m_1,w_105,h_140,q_100/25193e13/group62/DE/Uc/8419468ebc054e0768d271e905954255.jpg?v=AhUS5L13&amp;t=fwAAAWT5its." alt="意卷云">
                </a>
                <div class="bookMation">
                    <h3><a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">意卷云</a></h3>
                    <p class="tryread">公子颖儿						<a href="https://www.ireader.com/index.php?ca=Chapter.Index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">试读</a>                        </p>
                    <span>
                                                            <s></s>242

                                                    </span>
                    <p class="introduce">【古言权谋+虐恋情深+扮猪吃虎】相爱不相守，风止意难平。聪颖清醒才女卷云VS扮猪吃虎偏执意王，从前我只愿君心似我心白首不相离，可如今再无人令我愿意到白首。那个为我手捧萤火虫，在漫天雪地与我携手而行，郑重其事将簪子插到我鬓发里一遍遍唤我名字的人，再找不回了。
                        林卷云原是江南林家大小姐，因时逢乱世，林府突遭流匪袭击，逃亡途中和家人失散，为救重病的忠仆兴儿，甘愿卖身曹家为奴。她也因此结识儒雅有才的二公子曹君磊和忠良正直的范黎将军。一切的故事随着她进入王府成为意王梁献意的贴身婢女开始徐徐展开。
                        王权之下暗潮汹涌，杀机四伏，宫廷权谋、浪漫、残酷……林卷云却无心卷入了这场皇权更迭的争斗中……</p>
                </div>
            </li>
            <li>
                <a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">
                    <img src="https://bookbk.img.zhangyue01.com/idc_1/m_1,w_105,h_140,q_100/25193e13/group62/DE/Uc/8419468ebc054e0768d271e905954255.jpg?v=AhUS5L13&amp;t=fwAAAWT5its." alt="意卷云">
                </a>
                <div class="bookMation">
                    <h3><a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">意卷云</a></h3>
                    <p class="tryread">公子颖儿						<a href="https://www.ireader.com/index.php?ca=Chapter.Index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">试读</a>                        </p>
                    <span>
                                                            <s></s>242

                                                    </span>
                    <p class="introduce">【古言权谋+虐恋情深+扮猪吃虎】相爱不相守，风止意难平。聪颖清醒才女卷云VS扮猪吃虎偏执意王，从前我只愿君心似我心白首不相离，可如今再无人令我愿意到白首。那个为我手捧萤火虫，在漫天雪地与我携手而行，郑重其事将簪子插到我鬓发里一遍遍唤我名字的人，再找不回了。
                        林卷云原是江南林家大小姐，因时逢乱世，林府突遭流匪袭击，逃亡途中和家人失散，为救重病的忠仆兴儿，甘愿卖身曹家为奴。她也因此结识儒雅有才的二公子曹君磊和忠良正直的范黎将军。一切的故事随着她进入王府成为意王梁献意的贴身婢女开始徐徐展开。
                        王权之下暗潮汹涌，杀机四伏，宫廷权谋、浪漫、残酷……林卷云却无心卷入了这场皇权更迭的争斗中……</p>
                </div>
            </li>
            <li>
                <a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">
                    <img src="https://bookbk.img.zhangyue01.com/idc_1/m_1,w_105,h_140,q_100/25193e13/group62/DE/Uc/8419468ebc054e0768d271e905954255.jpg?v=AhUS5L13&amp;t=fwAAAWT5its." alt="意卷云">
                </a>
                <div class="bookMation">
                    <h3><a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">意卷云</a></h3>
                    <p class="tryread">公子颖儿						<a href="https://www.ireader.com/index.php?ca=Chapter.Index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">试读</a>                        </p>
                    <span>
                                                            <s></s>242

                                                    </span>
                    <p class="introduce">【古言权谋+虐恋情深+扮猪吃虎】相爱不相守，风止意难平。聪颖清醒才女卷云VS扮猪吃虎偏执意王，从前我只愿君心似我心白首不相离，可如今再无人令我愿意到白首。那个为我手捧萤火虫，在漫天雪地与我携手而行，郑重其事将簪子插到我鬓发里一遍遍唤我名字的人，再找不回了。
                        林卷云原是江南林家大小姐，因时逢乱世，林府突遭流匪袭击，逃亡途中和家人失散，为救重病的忠仆兴儿，甘愿卖身曹家为奴。她也因此结识儒雅有才的二公子曹君磊和忠良正直的范黎将军。一切的故事随着她进入王府成为意王梁献意的贴身婢女开始徐徐展开。
                        王权之下暗潮汹涌，杀机四伏，宫廷权谋、浪漫、残酷……林卷云却无心卷入了这场皇权更迭的争斗中……</p>
                </div>
            </li>
            <li>
                <a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">
                    <img src="https://bookbk.img.zhangyue01.com/idc_1/m_1,w_105,h_140,q_100/25193e13/group62/DE/Uc/8419468ebc054e0768d271e905954255.jpg?v=AhUS5L13&amp;t=fwAAAWT5its." alt="意卷云">
                </a>
                <div class="bookMation">
                    <h3><a href="https://www.ireader.com/index.php?ca=bookdetail.index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">意卷云</a></h3>
                    <p class="tryread">公子颖儿						<a href="https://www.ireader.com/index.php?ca=Chapter.Index&amp;pca=booksort.index&amp;bid=12979493" target="_blank">试读</a>                        </p>
                    <span>
                                                            <s></s>242

                                                    </span>
                    <p class="introduce">【古言权谋+虐恋情深+扮猪吃虎】相爱不相守，风止意难平。聪颖清醒才女卷云VS扮猪吃虎偏执意王，从前我只愿君心似我心白首不相离，可如今再无人令我愿意到白首。那个为我手捧萤火虫，在漫天雪地与我携手而行，郑重其事将簪子插到我鬓发里一遍遍唤我名字的人，再找不回了。
                        林卷云原是江南林家大小姐，因时逢乱世，林府突遭流匪袭击，逃亡途中和家人失散，为救重病的忠仆兴儿，甘愿卖身曹家为奴。她也因此结识儒雅有才的二公子曹君磊和忠良正直的范黎将军。一切的故事随着她进入王府成为意王梁献意的贴身婢女开始徐徐展开。
                        王权之下暗潮汹涌，杀机四伏，宫廷权谋、浪漫、残酷……林卷云却无心卷入了这场皇权更迭的争斗中……</p>
                </div>
            </li>

        </ul>
    </div>
    <!--展示内容 结束-->


    <!--翻页内容 结束-->
    <div class="changepage">
                <span>
                    <a class="up noClick"><s></s><i>上一页</i></a>
                    <a>1</a>
                    <a href="" class="down"><i>下一页</i><s></s></a>
                </span>
    </div>
    <!--翻页内容 结束-->


</div>
<!--内容部分 结束-->


<iframe
        src="../common/end.html"
        frameborder="10"
        heighe="200"
        width="100%"
        scrolling="no"
></iframe>

<script>
    var n1_login = new Vue({
            el:'#n1_login',
            data:{
                userLoggedIn:false,
                showDropdown:false,
                username:''
            },
            created(){
                // 钩子函数 该方法在页面显示后，自动执行
                axios.post("/user/sign",).then(res =>{
                    if(res.data.success === true){
                        this.userLoggedIn = true;
                        this.showDropdown = true;
                        this.username = res.data.data;
                    }else{
                        this.userLoggedIn = false;
                        this.showDropdown = false;
                    }
                })
            },
            methods:{
                goToLoginPage(){
                    window.location.href = 'login.html';
                    // this.userLoggedIn = true;
                    // this.showDropdown = true;
                    // this.username = "fangyaohui";
                },
                logout(){
                    this.userLoggedIn = false;
                    this.showDropdown = false;
                    this.username = '';
                    axios.post("/user/signout");
                    // window.location.href = 'navbar.html';
                }
            }
        })

    var content = new Vue({
        el:"#content",
        data:{
            categorize:[],
            booktype:'',
            other:'',
            showtitle:'',

        },
        created(){
            const urlParams = new URLSearchParams(window.location.search);
            this.booktype = urlParams.get("booktype");
            this.other = urlParams.get("other");
            this.showtitle = urlParams.get("showtitle");
            this.booktype = parseInt(this.booktype);
            this.other = parseInt(this.other);
            this.showtitle = parseInt(this.showtitle);

            console.log(this.currentid);
            axios.post("http://localhost:8080/book/getbooktype").then(res =>{
                    if(res.data.success === true){
                        this.categorize = res.data.data;
                        console.log(this.categorize);
                    }
            })
        }
    })

</script>
</body>
</html>